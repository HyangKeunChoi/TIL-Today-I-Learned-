## 도커 볼륨

+ 컨테이너는 기본적으로 상태 없음(stateless) 입니다. 컨테이너가 실행 된 후 발생하는 모든 변경 사항은 컨테이너 레이어에만 있으며 컨테이너가 종료되면 변경 사항이 모두 사라집니다.
+ 컨테이너는 Stateless하기 때문에 쉽게 갯수를 증가 시킬 수 있으며 다른환경에서도 빠르게 배포할 수 있습니다.
+ 소프트웨어의 버전 등 컨테이너의 상태 변경이 필요한 경우 새로운 버전의 이미지를 만들어서 배포하면 됩니다.
+ 컨테이너는 상태가 없기 때문에 여러 대의 컨테이너를 여러 곳에 빠르게 배포할 수 있습니다.

### Nginx 버전을 업데이트 해야하는 경우 (옛날과 오늘날)

![image](https://github.com/HyangKeunChoi/TIL-Today-I-Learned-/assets/49984996/bd5b1188-7c42-4b17-a4ff-a8360aa07b08)

![image](https://github.com/HyangKeunChoi/TIL-Today-I-Learned-/assets/49984996/2c787fda-8323-4781-8542-410d8b141d10)

![image](https://github.com/HyangKeunChoi/TIL-Today-I-Learned-/assets/49984996/d7d3021d-3129-49ba-bf49-358c10ba09fb)

### 컨테이너의 Stateless 특징
+ 컨테이너 이미지는 한번 지정된 후 변경되지 않습니다.
  - 새로운 설정이나 패치가 필요할 경우 새로운 이미지를 만들어야 합니다.
  - 컨테이너는 언제든지 새로운 컨테이너로 대체할 수 있습니다.
  - 컨테이너는 어떤 호스트에서든 컨테이너를 실행할 수 있습니다.
  - 컨테이너는 동일한 컨테이너를 여러개 쉽게 생성해서 트래픽에 대응할 수 있습니다.
  - 장애가 발생한 경우 새로운 컨테이너를 빠르게 시작할 수 있습니다.
 
### 주의사항
+ 컨테이너 자체는 데이터를 영구적으로 저장하는 기능이 없어서 외부에 저장 해야 합니다.
+ 사용자 세션정보나 캐시 같은 정보를 캨시 서버나 쿠키를 통해 관리합니다. (파일이나 메모리에 저장하지 않아야함)
+ 동일한 요청은 항상 동일한 결과를 제공해야 합니다.
+ 환경 변수나 구성파일을 통해 설정을 외부에서 주입할 수 있어야 합니다.

### 도커 볼륨
+ 컨테이너가 삭제되거나 업그레이드 될 경우 컨테이너 레이어가 초기화됩니다.
+ 컨테이너 환경에서는 같은 서버의 대수가 여러 개 존재합니다.
  - 트래픽이 증가할 때마다 컨테이너의 대수 증가
+ 컨테이너의 특정 디렉터리에 볼륨을 마운트해서 사용합니다.
  - 동일한 경로에 마운트에 하면 여러 컨테이너가 실행되도 문제 없다.
 
+ 컨테이너 실행 시 볼륨을 컨테이너의 내부 경로에 마운트할 수 있습니다. usb를 꽂는 것과 유사합니다.
+ 여러개의 볼륨을 마운트할 수 있습니다.
+ 여러 개의 컨테이너가 하나의 볼륨을 공유할 수 있습니다.
 
### 마운트
+ 마운트를 통해 외부 저장 공간을 특정 경로에 연결할 수 있습니다.
  - USB와 같은
 
### 바인드 마운트
+ 실제 데이터가 저장되는 디렉터리(사용자가 지정)
  - 사용자가 지정한 경로에 마운트 됨

### 명령어
+ docker volumne ls
+ docker volumne inspect 볼륨명 : 상세정보 확인
+ docker volumne create 볼륨명 : 볼륨 생성
+ docker volumne rm 볼륨명

