## InnoDB Deadlock Detect Optimization
+ InnoDB 데드락 감지 기능을 비활성화 하여 MySQL 성능을 최적화

## 데드락 감지 동작
+ SELECT FOR UPDATE와 같은 락을 요구하는 연산은 데드락 감지 스레드를 통해서 데드락을 유발 하는지 검사를 주기적으로 받는다.
+ 데드락 감지가 성능에 미치는 영향 : 많은 락을 요구하는 서비스 스레드 처리가 있다면 데드락 감지 스레드 때문에 지연이 발생할 수 있다.
+ 데드락 감지 스레드의 동작 방식 : 데드락 감지 스레드가 검사하는 동안에는 잠금을 가진 서비스들은 잠금을 반납하지 못한다.

## 최적화
+ innodb_deadlock_detect을 비활성화
+ 비활성화 하면 데드락이 발생할 수 있으므로 : innodb_lock_wait_timeout을 적절히 설정
  - 환경에 따라서 Lock을 기다리는 타임아웃을 조절하는 것이 좋다. (OLTP vs OLAP)
 
## 락을 기다리는 트랜잭션 유무를 확인 하는 법
+ Performance Schema를 통해 보는 법
  - Wait Event 테이블 : 잠금이나 I/O 작업을 통해서 대기하고 있는 스레드에 대한 정보를 확인
  - Lock 테이블 : 잠금이 점유되었거나, 잠금을 기다리고 있는 정보를 확인할 수 있음
+ InnoDB status를 통해 보는법
  - InnoDB 내부 상태를 통해서 잠금을 기다리는 트랜잭션을 볼 수 있음
 
