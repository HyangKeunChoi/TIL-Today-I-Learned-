# Ch 07. 타임라인 최적화

+ 시간 복잡도
+ log(Follow 전체 레코드) + 해당회원의 Following * log(Post 전체 레코드)
  - 이런 모델을 Fan Out On Read (Pull Model)이라고 함
  - 사용자가 매번 홈을 접속할때마다 부하를 감당하게됨 
  - 조회 시점에 부하
 
+ Fan Out On Write(Push Model)
  - write(쓰기)시점에 팬아웃을 한다.
  - 게시물 작성시, 해당 회원을 팔로우하는 회원들에게 데이터를 배달한다.
  - 쓰기 시점에 부하가 발생한다.
  
## 타임라인에서 배우는 트레이드 오프
+ PUSH model은 공간복잡도를 희생, PULL모델은 시간 복잡도를 희생
+ PULL 모델은 원본 데이터를 직접 참조하므로, 정합성에 유리
  - 하지만 follow가 많은 회원일 수록 처리 속도가 느리다.
  - 페북은 pull 모델(페북은 친구를 최대 5000명만 가능)
  - 인스타는 push 모델
+ push모델에서는 게시물 작성과 타임라인 배달의 정합성 보장에 대한 고민이 필요하다.
  - 게시물 작성시 follow가 많은 유저의 게시물을 작성하면 write가 기하 급수적으로 늘어난다.
    - 비동기나 다른 저장소
  - 모든 회원의 타임라인에 배달되기 전까지 게시물 작성의 트랜잭션을 유지하는 것이 맞을까?
  - CAP이론 찾아보자
  - push 모델은 pull 모델에 비해 시스템 복잡도가 높다.
  - 하지만 그만큼 비즈니스, 기술 측면에서 유연성을 확보시켜준다.
  - 상황, 자원, 정책 등 여러가지를 고려해 트레이드 오프 해야한다.
  
