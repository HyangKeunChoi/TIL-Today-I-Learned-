## 지연과 위임 (lateinit과 lazy())

+ 인스턴스화 시점과 프로퍼티 초기화 시점을 분리하고 싶다면?

### 상황

![image](https://github.com/HyangKeunChoi/TIL-Today-I-Learned-/assets/49984996/57e083a8-a108-4bf2-b33e-e6ef7aabbfad)

+ 이 코드를 변경 : 인스턴스화를 한번만 하고, 테스트를 할 때 변수를 초기화 하고 싶다.
  - 방법 1 : name의 기본값을 넣어둔다.
    - 변수가 변경 가능함
  - 방법 2 : name을 nullable하게 만든다.
  - 방법 3 : lateinit을 사용한다.
    - 초기값을 지정하지 않고, null이 들어갈 수 없는 변수를 선언
    - var 변수이기 때문에 값이 변경 가능하다.
    - 원리 : lateinit 변수는 컴파일 단계에서 nullable 변수로 바뀌고, 변수에 접근하려 할때 null이면 예외가 발생한다.
    - primitive type에는 사용할 수 없다.
   
### 이번엔 변수를 초기활 할 때 지정된 로직을 1회만 실행시키고 싶다.
+ 값을 가져오는 비용이 크고, 해당 변수가 사용되지 않을 수도 있다면 초기화 로직을 1회만 실행시키고 싶을 수 있다.
+ backing property를 사용해야 한다.

![image](https://github.com/HyangKeunChoi/TIL-Today-I-Learned-/assets/49984996/249d038b-262d-40c6-903f-501d1e44e1fb)

> _name을 backing property라고 한다.
> 
> 너무 번거롭다. - by lazy를 사용한다.

![image](https://github.com/HyangKeunChoi/TIL-Today-I-Learned-/assets/49984996/dbf5aed7-994e-47ff-bff6-c32ac63f03aa)

+ lazy는 코틀린에서 제공하는 함수이고, 함수를 파라미터로 받는다.
  - 이 함수는 name이 getter가 최초 호출될 때 실행되고, 기본적으로 Thread-safe 하다.
