# ElasticSearch 모니터링 하기

## cat API 활용하기
+ UI기반의 모니터링 시스템도 좋지만 cat API로 상황을 빠르게 파악하는것도 중요하다.

## cat health - 가장 기본, 가장 중요
+ ElasticSearch 클러스터의 전반적인 상태 확인

```
GET /_cat/health?v
```

+ relo : 재배치 샤드
+ init : 초기화
+ unassign : 노드에 배치되지 않은 샤드들

## 상태
+ green / yellow red

<img width="814" alt="image" src="https://user-images.githubusercontent.com/49984996/216815195-bd683d7d-6dbd-4b53-9496-9b20691024b1.png">

## cat nodes
+ 노드들의 전반적인 상태를 확인

```
GET /_cat?nodes?v
```
+ node.role : 마스터, 인제스트, 데이터 (약자로 되어 있어서 공식사이트에서 확인)
  - 별표 달려있는게 마스터
+ 기본적인 정보로 확인 가능한 정보를 제한적 입니다.
+ 뭘 볼수 있는지 확인하려면 ?

```
GET /_cat/nodes?help
```

+ 예시
```
GET /_cat/nodes?h=ip,heap.percent,disk.avail,names&v
```

## cat nodes는 언제 활용하면 좋을까요?
+ 노드들의 디스크 사용량 확인
+ 노드들이 명확한 역할을 수행하고 있는지 확인
+ 어떤 노드가 마스터 노드인지 확인
+ 노드들의 메모리 사용량 확인
