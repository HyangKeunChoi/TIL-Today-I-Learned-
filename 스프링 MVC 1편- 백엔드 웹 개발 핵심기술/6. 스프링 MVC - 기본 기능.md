## 스프링 MVC - 기본 기능

## war와 jar
+ war는 톰캣을 별도로 설치 후 거기에 빌드된 파일넣을떄 그리고 JSP를 사용할때 사용한다
+ jar는 내장 톰캣을 바로 돌릴때(war도 내장톰캣도 되긴하지만 jar가 더 최적화 되어 있다)

## 로깅 간단히 알아보기
+ System.out.println은 사용하면 안된다.

## 로깅 라이브러리
+ 스프링 부트 라이브러리를 사용하면 스프링 부트 로깅 라이브러리( spring-boot-starter-logging )가 함께 포함된다.
+ 스프링 부트 로깅 라이브러리는 기본으로 다음 로깅 라이브러리를 사용한다.
  - SLF4J - http://www.slf4j.org
  - Logback - http://logback.qos.ch
+ SLF4J는 인터페이스이고, 그 구현체로 Logback 같은 로그 라이브러리를 선택하면 된다

### 로그 선언
+ private Logger log = LoggerFactory.getLogger(getClass());
+ private static final Logger log = LoggerFactory.getLogger(Xxx.class)
+ @Slf4j : 롬복 사용 가능
  - 위에 변수 선언하지 않아도 log.info 사용할 수 있다.

### 로그 호출
+ log.info("hello")
+ System.out.println("hello")
+ 시스템 콘솔로 직접 출력하는 것 보다 로그를 사용하면 다음과 같은 장점이 있다. 실무에서는 항상 로그를 사용해야 한다.

+ log.trace("trace log={}", name);
+ log.debug("debug log={}", name); // 개발서버 같은 곳에서
+ log.info(" info log={}", name); // 중요한 정보
+ log.warn(" warn log={}", name);
+ log.error("error log={}", name); // 에러

## 로그 레벨 설정
+ application.properties
+ LEVEL: TRACE > DEBUG > INFO > WARN > ERROR
+ application.properties에 설정된 레벨에 따라 로그 출력이 된다
  - 예를들어 application.properties에는 DEBUG로 설정되면, log.trace() 로 로깅된 곳은 출력 않된다.

### 전체 로그 레벨 설정(기본 info)
+ logging.level.root=info // 라이브러리 로그도 출력된다
+ #hello.springmvc 패키지와 그 하위 로그 레벨 설정
+ logging.level.hello.springmvc=debug

### 매핑 정보
### @RestController
+ @Controller 는 반환 값이 String 이면 뷰 이름으로 인식된다. 그래서 뷰를 찾고 뷰가 랜더링 된다.
+ @RestController 는 반환 값으로 뷰를 찾는 것이 아니라, HTTP 메시지 바디에 바로 입력한다. 따라서 실행 결과로 ok 메세지를 받을 수 있다. @ResponseBody 와 관련이 있는데, 뒤에서 더 자세히 설명한다


## 요청 매핑

+ @RequestMapping("/hello-basic")
  - /hello-basic URL 호출이 오면 이 메서드가 실행되도록 매핑한다.
  - 대부분의 속성을 배열[] 로 제공하므로 다중 설정이 가능하다. {"/hello-basic", "/hello-go"}

### 둘다 허용
+ 다음 두가지 요청은 다른 URL이지만, 스프링은 다음 URL 요청들을 같은 요청으로 매핑한다.
+ 매핑: /hello-basic
+ URL 요청: /hello-basic , /hello-basic/

### HTTP 메서드
+ @RequestMapping 에 method 속성으로 HTTP 메서드를 지정하지 않으면 HTTP 메서드와 무관하게 호출된다.
+ 모두 허용 GET, HEAD, POST, PUT, PATCH, DELETE

### PathVariable(경로 변수) 사용
  - 실무에서 많이 사용한다
```java
/**
 * PathVariable 사용
 * 변수명이 같으면 생략 가능
 * @PathVariable("userId") String userId -> @PathVariable userId
 */
@GetMapping("/mapping/{userId}")
public String mappingPath(@PathVariable("userId") String data) {
 log.info("mappingPath userId={}", data);
 return "ok";
}
```
## 요청 매핑 - API 예시

+ 회원 관리 API
+ 회원 목록 조회: GET /users
+ 회원 등록: POST /users
+ 회원 조회: GET /users/{userId}
+ 회원 수정: PATCH /users/{userId}
+ 회원 삭제: DELETE /users/{userId}

## HTTP 요청 - 기본, 헤더 조회

### MultiValueMap
+ MAP과 유사한데, 하나의 키에 여러 값을 받을 수 있다.
+ HTTP header, HTTP 쿼리 파라미터와 같이 하나의 키에 여러 값을 받을 때 사용한다.
+ keyA=value1&keyA=value2

